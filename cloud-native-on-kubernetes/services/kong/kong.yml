_format_version: "3.0"
_transform: true

services:
- name: user-service
  url: http://user-service:8080
  routes:
    - name: public-routes
      paths:
        - /user-service/api/public
      methods:
        - GET
        - POST
        - PUT
        - DELETE
      strip_path: true

    - name: private-routes
      paths:
        - /user-service/api/private
      methods:
        - GET
        - POST
        - PUT
        - DELETE
      plugins:
        - name: jwt
          enabled: true
          config:
            # key_claim_name: iss
            claims_to_verify:
            - exp
      strip_path: true

# plugins:
# - name: jwt
#   enabled: true
#   config:
#     key_claim_name: kid
#     claims_to_verify:
#     - exp

consumers:
- username: admin
- username: developer

jwt_secrets:
- consumer: admin
  algorithm: HS256
  secret: 9D6DA3B7-5634-4FFB-A9A0-2CA14248A378
- consumer: developer
  algorithm: HS256
  secret: C7A20B51-A361-4E49-B132-1CD48E3169C5
